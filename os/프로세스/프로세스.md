# 프로세스
![alt text](<../설명사진/[OS] MAC OS의 프로세스 목록.png>)
* 실행 중인 프로그램을 의미하며, 메모리 공간, 코드, 데이터, 쓰레드 등의 자원들을 포함하는 `실행 단위`
* OS는 하나의 **프로그램이 실행되면** 이를 프로세스로 만들고, 필요한 자원(CPU 시간, 메모리..)을 할당합
* OS는 프로세스를 작업의 하나의 단위로 보고 자원들을 프로세스에 적절하게 분배함

<br></br>

## 2. 프로세스 제어 블록(PCB)
![alt text](<../설명사진/[OS]프로세스 제어 블록 .png>)
* **프로세스 제어 블록 (PCB)?**
    * <U>`운영체제(OS)`가 프로세스를 관리하고 스케줄링하며 제어하기 위해 필요한 정보가 담겨져 있는 블록</U>
    * 운영체제에서 각각의 프로세스에 대한 중요한 정보가 담겨져 있는 구조
    * PCB는 메모리에 저장되고, 프로세스의 실행 순서, 자원을 배분하며 관리함

### 2.1. PCB에 담기는 정보들
![alt text](<../설명사진/[OS] 프로세스 제어 블록에 담긴 정보들.png>)
1. **프로세스 상태 (Process State)**
    * 프로세스의 상태를 나타냄
    * 준비(Ready), 실행(Running), 대기(Waiting)

2. **프로세스 ID (PID)**
    * 프로세스를 식별하기 위한 고유 ID

3. **레지스터 정보**
    * 프로세스가 사용하는 CPU 레지스터의 정보가 담김
    * 프로세스가 다시 실행될 때 복구하기 위해 사용함

4. **메모리 관련 정보**
    * 프로세스가 사용하는 메모리의 정보에 대한 값이 저장됨
    * 프로세스가 메모리 어느 주소에 저장 되어있는지
    * 베이스, 한계 레지스터 값에 대한 정보가 들어있음
    (페이지 테이블 정보까지)

5. **프로세스 우선 순위에 대한 정보**
    * 프로세스의 우선 순위에 대한 정보가 담겨 져있음
    * 스케줄링에 활용됨

6. **계정 정보**
    * 프로세스가 CPU를 사용한 시간, 실행 시간, 한계 시간 등을 저장함

7. **사용한 파일과 입출력 장치 목록**
    * 사용자가 사용중인 입출력 장치나, 어떤 파일을 열었는지에 대한 정보가 담김

<br></br>

## 3. 프로세스의 상태
![alt text](<../설명사진/[OS] 프로세스의 상태.png>)
* **디스패치**
    * 준비 상태인 프로세스를 실제 CUP에 할당하여 실행 단계로 전환하는 작업

* **타이머 인터럽트**
    * 프로세스가 할당된 시간을 모두 사용해 발생하는 신호

1. **생성 상태 (new)**
    * 프로세스를 생성 중인 상태
    * 메모리에 `PCB`가 적재된 상태

2. **준비 상태 (ready)**
    * 프로세스가 생성되어 CPU의 할당을 기다리는 상태

3. **실행 상태 (running)**
    * 프로세스가 CPU의 할당을 받아 실행 중인 상태

4. **대기 상태 (blocked)**
    * CPU가 처리할 작업이 대기 중인 상태

5. **종료 상태 (terminated)**
    * 프로세스가 종료된 상태
    * 이때 OS는 PCB와 프로세스가 사용한 메모리를 정리함

<br></br>

## 4. 프로세스의 계층
* 운영체제에서 **프로세스의 관계를 나타내는 방**법**으로, <U>부모와 자식 관계를 기반</U>으로 구분함

![alt text](<../설명사진/[OS] 프로세스의 계층형 구조.png>)
* **부모 프로세스**
    * 다른 프로세스를 생성하는 프로세스
    * 자식 프로세스를 생성하고, 그 프로세스들의 실행을 관리함
* **자식 프로세스**
    * 부모 프로세스로 부터 생성된 프로세스
    * 독립적으로 실행되지만, 부모 프로세스가 종료되면 영향을 받음

<br></br>


## 5. 프로세스 생산 과정
![alt text](<../설명사진/[OS] 프로세스가 생산되는 과정 (1).png>)
* 부모 프로세스에서 `fork System call`을 통해 자신의 복사본을 자식 프로세스로 생성
* 자식 프로세스에서는 `exec System call`을 통해 자신의 메모리 공간을 다른 프로그램으로 교체

![alt text](<../설명사진/[OS] 프로세스가 생산되는 과정 (2).png>)

<br></br>

## 6. 문맥 교환 
* **문맥:** 하나의 프로세스가 실행을 멈추고 다시 재개를 하기 위해 기억 되어야할 정보
* **문맥 교환:** 하나의 프로세스가 CPU에서 실행 중일 때, 이를 중지하고 다른 프로세스를 실행하기 위해 <U>프로세스 상태를 저장하고 복구 하는 작업</U>

![alt text](<../설명사진/[OS] 프로세스 문맥 교환 흐름도.png>)


<br></br>


## 7. 프로세스의 메모리 영역
![alt text](<../설명사진/[OS] 프로세스의 메모리 영역.png>)
* **스택 영역** 
    * 함수 호출과 관련된 데이터를 저장하며 자동으로 관리 됨
    * 데이터를 임시적으로 저장하기에 잠깐 사용되어지다가 소멸됨
    * EX: 매개 변수, 지역 변수

* **힙 영역**
    * 개발자가 직접 메모리에 데이터를 할당할 수 있은 공간
    * 동적으로 할당 되며, 개발자가 할당과 해제를 해줘야 함

    * 메모리를 반환하지 않으면 할당한 공간에 계속 데이터가 남아 메모리 낭비가 발생됨
    (Memory Leak) 메모리 누수

* **데이터 영역**
    * 프로그램이 실행되기 전까지 유지할 데이터가 저장되는 공간
    * 데이터 영역의 크기는 불변의 성질을 가짐 (정적 할당 영역)
    * EX: 전역 변수 (Global Variable)

* **코드 영역**
    * 실행 할 수 있는 코드 (기계어)가 저장되어 있는 공간
    * 데이터가 들어있는게 아니고 CPU가 실행할 명령어가 담겨 있기에 쓰기가 금지 되어있음
    * 읽기 전용 공간

<br></br>

