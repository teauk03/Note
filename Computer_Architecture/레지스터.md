# 레지스터 

**레지스터?**
* CPU 내부에 있는 고속 메모리
* 연산을 수행할 때 필요한 데이터를 잠깐 보관하는 용도로 사용 (임시 저장소)

<br></br>

## 레지스터의 역할 
**1. 데이터 임시 저장** 
* CPU가 연산을 수행할 때 필요한 데이터, 명령어 등을 임시로 저장함

**2. 명령어 실행 속도 상승** 
* RAM 보다 읽어오는 속도보다 레지스터에서 직접 읽어와 계산 하는 것이 빠름

**3. 프로그램 실행 흐름 제어**
* 현재 실행 중인 명령어의 프로그램 카운터나 연산 결과를 저장장하여 프로그램 흐름을 제어함

<br></br>

## CPU 내부의 레지스터들의 동작 방식
![alt text](<설명사진/레지스터 동작.png>)

<br></br>

## 주요 레지스터 

* **프로그램 카운터(PC)**
    * 명령어 카운터(Instruction Pointer)이라고도 부름
    * 메모리에서 가져올 명령어의 주소를 저장함

* **명령어 레지스터(IR)**
    * 메모리에서 읽어온 명령어를 저장함

* **메모리 주소 레지스터(MAR)**
    * 말 그대로 메모리의 주소를 저장함

* **메모리 버퍼 레지스터(MBR)**
    * 메모리에 읽거나 쓰려는 데이터, 명령어를 일시적으로 저장함

* **플래그 레지스터(FR)**
연산 결과의 상태를 저장함

* **범용 레지스터(GPR)**
    * 다양한 목적에서 사용할 수 있는 레지스터
    * cpu 내부에서 산술,논리연산, 데이터 전송 등의 작업을 수행함

* **스택 포인터(SP)**
    * 스택의 최상위 주소를 저장함

* **베이스 레지스터(BR)**
    * 프로그램, 데이터가 저장된 위치의 첫번째 저장 위치를 저장함
    * 대형 프로그램에서 명령어의 주소를 효율적으로 관리할 때 사용

<br></br>

## 레지스터와 관련된 주소 지정 방식
* CPU 내부에서 레지스터를 활용하면  주소 지정 방식 작업을 빠르게 수행할 수 있음

<br></br>

### 1. 스택 주소 지정 방식
![alt text](<설명사진/스택 주소 지정 방식.png>)
* 스택을 활용하여 데이터를 삽입하고 추출하는 방식
* 스택 포인터를 활용하여 스택의 가장 최근 위치(top)을 추적
* 데이터를 삽입하면 스택포인터가 증가, 반대로 추출하면 스택 포인터가 감소
* 후입 선출(LIFO)로 동작

<br></br>

### 2. 변위 주소 지정 방식
![alt text](<설명사진/변위 주소 지정 방식.png>)
* 메모리의 특정 위치에 저장 값 + 레지스터 주소 = 우효 주소

<br></br>

### 변위 주소 지정 방식을 사용하는 명령어의 구조

![alt text](<설명사진/변위 주소 지정 방식을 사용하는 명령어의 구조.png>)
* 레지스터에 어떤 레지스터가 있는지에 따라 상대 주소, 베이스 레지스터 지정 방식으로 나뉨

#### 2.1. 상대 주소 지정 방식
![alt text](<설명사진/상대 주소 지정 방식.png>)
* 오퍼랜드와 프로그램 카운터를 더하여 유효 주소를 얻는 방식


#### 2.2. 베이스 레지스터 주소 지정 방식
![alt text](<설명사진/베이스 레지스터 주소 지정 방식.png>)
* 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식