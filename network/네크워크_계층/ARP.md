# ARP
* IP 주소를 MAC 주소로 변환해주는 프로토콜
    * 동일 네트워크(LAN) 내에서 실제 데이터를 전송하는 것은 MAC 기반이기 때문
    * IP 주소만으로는 이더넷 프레임 전송이 불가능함
    * 따라서 IP ➝ MAC 변환이 필요하고, 이 역할을 ARP가 함
    * 변환된 MAC 주소는 이더넷 프레임의 헤더에 포함되어 전송됨



## ARP 동작 과정 

### 1. ARP 요청
![alt text](<../설명사진/ARP 동작과정 (1).png>)
* **(1) 목적지 IP로 패킷 전송 시도**
    * 호스트 1 (192.168.0.1)은 목적지 IP(192.168.0.5)로 데이터를 보내려 하지만,
    해당 IP의 MAC 주소를 모름 → 전송 불가.

* **(2) ARP 요청 송출 (브로드캐스트)**
    * 호스트 1은 `192.168.0.5`의 <U>MAC 주소를 알려줘!"라는 ARP 요청</U> 패킷 생성
    * `브로드캐스트(FF:FF:FF:FF:FF:FF`로 네트워크 전체에 전송
    * 스위치는 이 요청을 받아서 모든 호스트(2, 3, 4)에게 전달

### 2. ARP 응답
![alt text](<../설명사진/ARP 동작과정 (2).png>)
* **(3) 대상 호스트가 응답 (reply MAC)**
    * 호스트 4가 자신의 IP와 일치하는 요청을 확인하고, 자신의 MAC 주소를 포함한 ARP 응답을 유니캐스트로 전송
    * (보낸 사람: 호스트 4 → 받는 사람: 호스트 1)

* **(4) 스위치 MAC 학습**
* 스위치는 응답을 전달하면서, 응답 패킷의 출발지 MAC 주소를 보고 해당 포트에 MAC을 등록함
    * → 이후 이 MAC 주소로 들어오는 패킷은 브로드캐스트 없이 직접 포트 전달 가능

### 3. ARP Table 갱신
* **(5) 호스트 1이 ARP 응답 수신**
    * 호스트 1은 호스트 4로부터 받은 응답에서 MAC 주소를 확인함
        * **이런식으로 바꿈:** `192.168.0.5` → `08-00-27-4c-b1-fa`

* **(6) ARP 테이블에 저장**
![alt text](<../설명사진/ARP Table update.png>)
    * 호스트 1은 이 정보를 자신의 ARP 테이블에 캐시로 저장
    * 이후에는 같은 IP로 전송 시, ARP 요청 없이 바로 MAC 주소 사용 가능