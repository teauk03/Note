# Domain Name과 DNS
![alt text](<../설명사진/[응용 계층] Domain Namerhk DNS의 기본적인 동작.png>)

<br></br>

## 1. Domain Name
* `사용자(사람)`가 통신하고자 하는 대상을 파악하기 위해 만들어진 정보

<br></br>

### 1.1. Domain Name의 계층
![alt text](<../설명사진/[응용 계층] 도메인 레벨층.png>)
* 도메인 네임은 `.`을 기준으로 계층적으로 분류됨
* 최상단에 `Root Domain`, 그 다음 계층으론 `Top-Level Domain`이 존재함
* **Ex:** https://www.google.com.
    * `.`: 루트 도메인
    * `com`: 최상위 도메인
    * `google`: 2단계 도메인
    * `www`: 3단계 도메인

<br></br>

## 2. DNS (Domain Name System)
* Domain Name을 IP로 바꿔주는 시스템
* Domain Name을 관리하고 IP로 바꿔주는 역할을 DNS Server가 담당함 

<br></br>

### 2.1. 계층형 Domain Name Server
*  Domain Name Server는 DNS 시스템을 구성하는 핵심 서버로, DNS의 계층 구조를 기반으로 작동함
* 사용자가 도메인 이름을 요청하면, DNS 질의는 다음과 같은 계층적 순서를 따라 하위 서버로 전달되며, 최종적으로 해당 도메인의 IP 주소를 찾아 반환함

<br></br>

#### 2.1.1. 로컬 네임 서버
![alt text](<../설명사진/[응용 계층] 로컬 네임 서버.png>)

* 클라이언트와 맞닿아 있는 서버
    * DNS를 통해 IP를 찾을 때 찾게되는 서버
* 사용자가 도메인 이름을 요청하면, 가장 먼저 로컬 네임 서버에 질의가 전달됨
* <U>로컬 네임 서버는 자체적으로 캐시에 저장된 결과가 있으면 바로 응답하고, 없으면 상위 DNS 서버에 질의를 전달</U>
* 서버의 위치는 인터넷 서비스 제공업체(ISP)나 조직 내에 위치
<br></br>

#### 2.1.2. TLD 네임 서버
![alt text](<../설명사진/[운용 계층] TLD 네임서버.png>)
* `최상위 도메인(.com, .net)`을 관리하는 DNS 서버 
* 로컬 네임 서버가 답을 모를 경우, 루트 네임 서버에 질의하고, 루트 네임 서버는 해당 도메인의 TLD 네임 서버를 알려줌
* TLD 네임 서버는 해당 도메인(.com, .kr 등)에 속한 권한 있는 네임 서버(책임 네임 서버)의 위치 정보를 제공

<br></br>

#### 2.1.3. 책임 네임 서버
![alt text](<../설명사진/[응용 계층] 책임 네임 서버.png>)
* 권한 있는 네임 서버(Authoritative Name Server)라고도 하며, <U>실제 도메인 이름과 IP 주소의 매핑 정보를 가지고 있는 서버</U>
* TLD 네임 서버로부터 질의를 받은 후, 최종적으로 해당 도메인의 IP 주소를 응답함
* `example.com`의 IP 주소를 알고 있는 서버가 바로 이 책임 네임 서버입

<br></br>

### 2.2. DNS 질의 방식
* DNS 질의는 크게 두 가지 방식으로 동작함
    * 재귀적 질의(Recursive Query)
    * 반복적 질의(Iterative Query) 
* 이 두 방식은 클라이언트와 서버 간, 또는 서버와 다른 서버 간의 통신 방식에 따라 구분됨

<br></br>

#### 2.2.1. 재귀적 질의
![alt text](<../설명사진/[응용 계층] 재귀적 질의.png>)
* 클라이언트가 DNS 서버에게 자신이 원하는 IP 주소를 끝까지 찾아서 응답해달라고 하는 것과 같은 방식
    1.	`사용자 → 로컬 네임 서버`: www.google.com의 IP 주소를 요청
	2.	`로컬 네임 서버 → 루트 네임 서버`: 해당 IP를 찾기 위해 루트 서버에 질의
	3.	`루트 네임 서버→ 로컬 네임 서버`: .com 도메인을 담당하는 TLD 서버 주소 반환
	4.	`로컬 네임 서버 → TLD 네임 서버`: google.com 도메인을 찾기 위한 질의
	5.	`TLD 네임 서버 → 로컬 네임 서버`: google.com을 담당하는 권한 있는 서버 주소 반환
	6.	`로컬 네임 서버→ 책임 네임 서버`: www.google.com의 IP 주소 요청
	7.	`책임 네임 서버 → 로컬 네임 서버`: 최종 IP 주소 응답
	8.	`로컬 네임 서버 → 사용자`: IP 주소 전달
* **클라이언트** 입장에선 <U>단 한번의 요청을 하면 웅답이 오기에 매우 편리함</U>
* **Local DNS 서버** 입장에선 모든 계층의 상위 서버에 직접 순회하며 IP 주소를 찾기에 <U>매우 부하가 커짐</U>

<br></br>

#### 2.2.2. 반복적 질의
![alt text](<../설명사진/[응용계층] 반복적 질의.png>)
* 클라이언트의 요청을 받은 DNS 서버가 직접 IP를 찾지 않고, 다음 단계의 서버 주소만 알려주는 방식
	1.	`사용자 → 로컬 네임 서버`: www.google.com의 IP 주소 요청
	2.	`로컬 네임 서버 → 루트 네임 서버`: 직접 질의
	3.	`루트 네임 서버 → 로컬 네임 서버`: .com 도메인을 담당하는 TLD 서버 주소 반환
	4.	`로컬 네임 서버 → TLD 네임 서버`: google.com 도메인 질의
	5.	`TLD 네임 서버 → 로컬 네임 서버`: google.com을 담당하는 책임네임 서버 주소 반환
	6.	`로컬 네임 서버 → 책임 네임 서버`: www.google.com에 대한 IP 주소 요청
	7.	`책임 네임 서버 → 로컬 네임 서버`: 최종 IP 주소 응답
	8.	`로컬 네임 서버 → 사용자`: IP 주소 전달
* 로컬 네임 서버가 여러 개의 계층에 질의를 통해 최종 IP를 찾아냄
* 이런 방식을 통해 서버의 부하를 줄일 수 있음
* 그 만큼 구현 복잡도가 높음